define("util",["jquery"],function(){var e={};return e.language=function(){var t=e.getCookie("lang");return t||(t=navigator.language||navigator.userLanguage),t.replace("_","-").toLowerCase()},e.DATE_DAY=864e5,e.DATE_HOUR=36e5,e.humanTime=function(t,n){typeof t=="string"&&(t=e.Str2date(t)),typeof n=="string"&&(n=e.Str2date(n));var r,i,s,o=Math.abs(n.getTime()-t.getTime())/1e3;return o>=31536e3?(r=o/31536e3,i=Math.round((r-Math.floor(r))*12),s=parseInt(r)+"年"+(i==0?"":i+"个月")):o>=2592e3?(r=o/2592e3,i=Math.round((r-Math.floor(r))*30),s=parseInt(r)+"个月"+(i==0?"":i+"天")):o>=86400?(r=o/86400,i=Math.round((r-Math.floor(r))*24),s=parseInt(r)+"天"+(i==0?"":i+"小时")):o>=3600?(r=o/3600,i=Math.round((r-Math.floor(r))*60),s=parseInt(r)+"小时"+(i==0?"":i+"分钟")):o>=60?(r=o/60,s=parseInt(r)+"分钟"):o<60&&(s=parseInt(o).toString()+"秒"),s},e.drawingActiveStatus=function(e,t){var n=t.user.id,r={is_js:!1,is_xmjl:!1,is_xmgl:!1,is_zt:!1,finish_js:!1,finish_xmjl:!1,finish_xmgl:!1,finish_zt:!1};return e.xmjl_id==n&&(r.finish_xmjl=e.is_xmjl_sign,r.is_xmjl=!0),t.draw_js_user_ids.indexOf(n.toString())>-1&&(r.finish_js=e.js_sign_by>0,r.is_js=!0),t.draw_sw_user_ids.indexOf(n.toString())>-1&&(r.finish_sw=e.sw_sign_by>0,r.is_sw=!0),t.draw_xmgl_user_ids.indexOf(n.toString())>-1&&(r.finish_xmgl=e.xmgl_sign_by>0,r.is_xmgl=!0),t.draw_zt_user_ids.indexOf(n.toString())>-1&&(r.finish_zt=e.zt_sign_by>0,r.is_zt=!0),r},e.userAvatar=function(e){return!e||e==""?e="/assets/img/avatar_empty.png":e="/upload/avatar/"+e,e},e.setTitle=function(e){e||(e=""),$("#gos-headerTitle").text(e),document.title=e},e.str2date=function(e){return e=e.replace(/[A-Za-z]/g," ").substr(0,19),new Date(Date.parse(e))},e.date2str=function(e,t){if(!e)return"";switch(typeof e){case"number":e=new Date(e);break;case"string":e=this.str2date(e)}return t&&t=="time"?e.getFullYear()+"-"+this.lpad(e.getMonth()+1,"0",2)+"-"+this.lpad(e.getDate(),"0",2)+" "+this.lpad(e.getHours(),"0",2)+":"+this.lpad(e.getMinutes(),"0",2):e.getFullYear()+"-"+this.lpad(e.getMonth()+1,"0",2)+"-"+this.lpad(e.getDate(),"0",2)},e.getUrlParameter=function(e){var t=window.location.search.substring(1),n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}},e.cipherString=function(t,n,r){var i=new RSAKey,s=Server.getTime().toString(),o=CryptoJS.MD5(s+n);i.setPublic(t.hex,"10001");var u=i.encrypt(e.lpad(s,"0",16)+o.toString(CryptoJS.enc.Base64)),a=n+"|"+r,f=e.aesEncrypto(a,s,o),l=t.keyid.toString()+"|"+CryptoJS.enc.Hex.parse(u.toString()).toString(CryptoJS.enc.Base64)+"|"+f.toString();return l},e.aesEncrypto=function(t,n,r){n=n.toString();var i=CryptoJS.MD5(e.lpad(n,"0",16)),s=CryptoJS.AES.encrypt(t,r,{iv:i});return s.ciphertext.toString(CryptoJS.enc.Base64)},e.aesDecrypto=function(t,n,r){n=n.toString();var i=CryptoJS.MD5(e.lpad(n,"0",16)),s={ciphertext:CryptoJS.enc.Base64.parse(t),salt:""};return decrypted=CryptoJS.AES.decrypt(s,r,{iv:i}),decrypted.toString(CryptoJS.enc.Utf8)},e.lpad=function(e,t,n){while(e.toString().length<n)e=t+e;return e},e.rpad=function(e,t,n){while(e.toString().length<n)e+=t;return e},e.objectFind=function(e,t,n){if(!n)return null;var r,i=n.length;for(r=0;r<i;r++)if(n[r]&&n[r][e]==t)return n[r];return null},e.objectFindIndex=function(e,t,n){if(!n)return-1;var r,i=n.length;for(r=0;r<i;r++)if(n[r]&&n[r][e]==t)return r;return-1},e.setCookie=function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*864e5);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"},e.getCookie=function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},e.deleteCookie=function(e){this.SetCookie(e,"",-1)},e.getNick=function(){if(this.currentNick)return this.currentNick;var e=decodeURIComponent(this.getCookie("PUB_gosauth")),t=e.split("|");return t.length>1?this.currentNick=t[0]:this.currentNick=e,this.currentNick},e.getSecret=function(){return decodeURIComponent(this.getCookie("secret"))},e.scopeFormData=function(e){var t,n,r,i={};for(n in e){if(n.charAt(0)=="$")continue;t=e[n];if(!t)continue;if(typeof t.$$parentForm!="undefined"&&t.$valid)for(r in t){if(r.charAt(0)=="$")continue;t[r]&&typeof t[r].$modelValue!="undefined"?i[r]=t[r].$modelValue:i[r]=t[r].$viewValue}}return i},e}),define("ajax",["util","jquery"],function(e){var t={NewClient:function(e,t){return new n(e,t)},serverTime:{diff:0,set:function(e){this.diff=e>0?(new Date).getTime()-e*1e3:0},time:function(){return(new Date).getTime()-this.diff}},getHostName:function(){var e=window.location.host.split(".");return e[e.length-2]+"."+e[e.length-1]},getUrlVars:function(){var e=[],t,n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++)t=n[r].split("="),e.push(t[0]),e[t[0]]=t[1];return e},datasetDecode:function(e){if(!e||e.length==0)return e;var t=e[0],n=e.length,r,i,s=[];for(var o=1;o<n;o++){r=new Object;for(var u=0;u<t.length;u++)r[t[u]]=e[o][u];s.push(r)}return s}},n=function(e,t){this.path=e||"/api/web",this._timeout=t||1e6,this._button=null,this._block=null};n.prototype.errorHandler=function(e){console.log(e)},n.prototype.bindClick=function(e,t){return this._button=e,e.click(t),this},n.prototype.block=function(e){return this._block=e,this},n.prototype.sendAlone=function(e,t){if(this.deferred&&this.deferred.state()=="pending"){var n=function(){};return{done:n,fail:n,always:n}}return this.deferred=this.send(e,t),this.deferred},n.prototype.send=function(e,t){var n={method:e,args:t?t:null},r={type:"POST",dataType:"json",cache:!1,timeout:this._timeout},i=null;this._block&&this.doBusy(this._block,!0),this._button&&this.doDisable(this._button,!0);var s=this;return deferred=$.ajax({url:this.path,type:r.type,dataType:r.dataType,cache:r.cache,data:{src:JSON.stringify(n)},timeout:r.timeout}),deferred.always(function(){s._block&&s.doBusy(s._block,!1),s._button&&s.doDisable(s._button,!1)}).fail(function(e,t,n){switch(e.status){case 599:if(s.errorHandler)try{s.errorHandler(JSON.parse(e.responseText))}catch(r){console.log(r)}break;case 404:alert(t+": api not found!");break;default:alert(t+": "+e.responseText)}}),deferred},n.prototype.doDisable=function(e,t){typeof e=="string"&&(e=$(e)),e.attr("disabled",t?"disabled":null)},n.prototype.doBusy=function(e,t){var n,r;typeof e=="string"?n=$(e):n=e;var i={bgColor:"#CCCCCC",duration:200,opacity:.5};n.each(function(){var e=$(this);t?(r=$("<div></div>").css({"background-color":i.bgColor,opacity:i.opacity,width:e.width(),height:e.height(),position:"absolute",top:"0px",left:"0px","z-index":9999}),r=$('<div class="block-overlay"></div>').css({position:"relative"}).append(r),e.prepend(r.append('<div class="bloack-ui"></div>').fadeIn(i.duration))):(r=e.children(".block-overlay"),r.length>0&&r.remove())})};var r=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1};return $.fn.emulateTransitionEnd=function(e){var t=!1,n=this;$(this).one("bsTransitionEnd",function(){t=!0});var r=function(){t||$(n).trigger($.support.transition.end)};return setTimeout(r,e),this},$(function(){$.support.transition=r();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}),t}),require.config({waitSeconds:100,baseUrl:"/assets/js/",paths:{chart:MYENV+"/mylib/chart",util:MYENV+"/mylib/util",ajax:MYENV+"/mylib/ajax"}}),require(["ajax","util","chart"],function(e,t,n){function s(e){var t=0,s=0,o;for(t=0;t<i.length;t++){o=i[t],$("#"+o.targetId).empty();for(s=0;s<r.length;s++)r[s][e+"_"+o.type]<0&&(s==r.length-1?r[s][e+"_"+o.type]=r[s-1][e+"_"+o.type]:r[s][e+"_"+o.type]=r[s+1][e+"_"+o.type]);n[o.method].call(this,o.targetId,r,e+"_"+o.type,o.opt)}}var r,i=[{targetId:"chartRzyeBar",method:"barChart",type:"rzye",opt:{title:"融资余额差值（亿元）"}},{targetId:"chartRzyeLine",method:"lineChart",type:"rzye",opt:{title:"融资余额（亿元）"}},{targetId:"chartRzmreBar",method:"barChart",type:"rzmre",opt:{title:"融资买入额差值（亿元）"}},{targetId:"chartRzmreLine",method:"lineChart",type:"rzmre",opt:{title:"融资买入额（亿元）"}},{targetId:"chartRqylyeBar",method:"barChart",type:"rqylye",opt:{title:"融券余额差值（亿元）",color:"#FF7700"}},{targetId:"chartRqylyeLine",method:"lineChart",type:"rqylye",opt:{title:"融券余额（亿元）",color:"#FF7700"}}];$(":radio[name=optionsRadios]").change(function(){s($(this).filter(":checked").val())}),$("#btnRzrqQuery").click(function(){var e=$("#txtCode").val(),t=/[a-zA-Z]/;if(e==""||t.test(e)){alert("股票代码错误，请重新输入！");return}window.location.href="/rzrq/stock/"+e}),$("#txtCode").keypress(function(e){e.which==13&&$("#btnRzrqQuery").trigger("click")}),e.NewClient("/api/open").send("stock.rzrq.SumData",null).done(function(e){r=e,s($(":radio[name=optionsRadios]:checked").val())}).fail(function(e){var t=JSON.parse(e.responseText);doError(t.message)})}),define("page/rzrq/Sum",function(){});